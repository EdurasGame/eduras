<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplified DocBook XML V1.0//EN"
"http://www.oasis-open.org/docbook/xml/simple/1.0/sdocbook.dtd">
<article>
	<articleinfo>
		<title>Architecture of game logic</title>
	</articleinfo>

	<section>

		<title>(fma) What's this?</title>

		<para>
			This chapter concerns the composition of the game logic. We try
			to document	any part of that in here as long as it is not self
			explanatory or easily understood reading
			the javadoc documentation of the corresponding classes.
		</para>

	</section>

	<section>
		<title>(fma) The architecture</title>

		<para>
			The following figure shows most of the classes you will find in the
			game logic. Note that some operations or attributes might be left out
			in the figure since they are not that important or unnecessary to
			mention, e.g. getter and setter methods.
			<informalfigure>
				<graphic fileref="images/gamelogicclasses.jpg"></graphic>
			</informalfigure>
		</para>

		<para>
			As main entry point to the game logic there is a class that
			implements 'GameLogicInterface'.
			The interface shall provide any
			services the IEP (see high-level-architecture) needs.
			Especially it
			shall give access to a so called 'GameInfo' class, which provides
			information about
			the currently ongoing match. For a first increment,
			GameInfo cointains a list of all the objects in the
			game and about the
			map. A map itself contains of a number of fields (as a
			two-dimensional array, indicating x- and y-positions).
		</para>

		<para>
			A GameObject represents an object that is physically on the map.
			So it's characterized by a current x- and y-position
			on the map.
		</para>

	</section>
	<section>
		<title>(jme) Networking</title>
		<para>
			Server-client communication is an important part of the game. This is not the only reason why
			we should take a closer look at this topic.
		</para>
		<section>
			<title>Messages</title>
			<para>
				Subclasses of GameEvent are used to create events. When sent over network, they are serialized in
				to a special form. Messages will be formatted like following pattern: <code>##id#arg0#arg1#arg2#arg3...</code>
			</para>
			<table>
        	    <title>Network messages and their arguments when serialized, ordered by message-number</title>
            	<tgroup cols="3">
                	<thead>
                    	<row>
                        	<entry>#</entry>
	                        <entry>Name</entry>
    	                    <entry>Short description</entry>
        	                <entry>arg0</entry>
            	            <entry>arg1</entry>
                	        <entry>arg2</entry>
                    	    <entry>arg3</entry>
                        	<entry>arg4</entry>
	                     </row>
    	            </thead>
        	        <tbody>
            	        <row>
                	        <entry>
                    	      	10
                        	</entry>
	                        <entry>
    	                        MOVE_LEFT_PRESSED
        	                </entry>
            	            <entry>
                	            
                    	    </entry>
                        	<entry>
	                        	owner that pressed key
    	                    </entry>
        	            </row>
            	        <row>
                	        <entry>
                    	      	11
                        	</entry>
	                        <entry>
    	                        MOVE_RIGHT_PRESSED
        	                </entry>
            	            <entry>
                	            
                    	    </entry>
                        	<entry>
	                        	owner that pressed key
    	                    </entry>
        	            </row>
            	        <row>
                	        <entry>
                    	      	12
                        	</entry>
                        	<entry>
	                            MOVE_UP_PRESSED
    	                    </entry>
        	                <entry>
            	                
                	        </entry>
                    	    <entry>
	                        	owner that pressed key
	                        </entry>
    	                </row>
        	            <row>
            	            <entry>
                	          	13
                    	    </entry>
                        	<entry>
                            	MOVE_DOWN_PRESSED
	                        </entry>
    	                    <entry>
        	                    
            	            </entry>
                	        <entry>
                    	    	owner that pressed key
                        	</entry>
	                    </row>
    	                <row>
        	                <entry>
            	              	14
                	        </entry>
                    	    <entry>
                        	    MOVE_LEFT_RELEASED
	                        </entry>
    	                    <entry>
        	                    
            	            </entry>
                	        <entry>
                    	    	owner that pressed key
                        	</entry>
	                    </row>
    	                <row>
        	                <entry>
            	              	15
                	        </entry>
                    	    <entry>
                        	    MOVE_RIGHT_RELEASED
	                        </entry>
    	                    <entry>
        	                    
            	            </entry>
                	        <entry>
                    	    	owner that pressed key
                        	</entry>
	                    </row>
    	                <row>
        	                <entry>
            	              	16
                	        </entry>
                    	    <entry>
                        	    MOVE_UP_RELEASED
	                        </entry>
    	                    <entry>
                            
        	                </entry>
            	            <entry>
                	        	owner that pressed key
                    	    </entry>
	                    </row>
    	                <row>
        	                <entry>
	                          	17
    	                    </entry>
        	                <entry>
            	                MOVE_DOWN_RELEASED
                	        </entry>
                    	    <entry>
                        	    
	                        </entry>
    	                    <entry>
        	                	owner that pressed key
            	            </entry>
                	    </row>
                    	<row>
	                        <entry>
    	                      	18
        	                </entry>
            	            <entry>
                	            SETSPEEDVECTOR
                    	    </entry>
                        	<entry>
                            	
	                        </entry>
    	                    <entry>
        	                	unit id
            	            </entry>
                	        <entry>
                    	    	new x-value
                        	</entry>
	                        <entry>
    	                    	new y-value
        	                </entry>
            	        </row>
                	    <row>
	                        <entry>
    	                      	19
        	                </entry>
            	            <entry>
                	            SETSPEED
                    	    </entry>
                        	<entry>
                            
	                        </entry>
    	                    <entry>
        	                	unit id
            	            </entry>
                	        <entry>
                    	    	new value
                        	</entry>
	                    </row>
	                    <row>
	                        <entry>
	                          	30
	                        </entry>
	                        <entry>
	                            SHOOT_PRESSED
	                        </entry>
	                        <entry>
	                            
	                        </entry>
	                        <entry>
	                        	unit id
		                        </entry>
	                    </row>
	                    <row>
	                        <entry>
	                          	31
	                        </entry>
	                        <entry>
	                            SHOOT_RELEASED
	                        </entry>
    	                    <entry>
        	                    
            	            </entry>
                	        <entry>
                    	    	unit id
                        	</entry>
	                    </row>
    	                <row>
        	                <entry>
            	              	101
                	        </entry>
                    	    <entry>
                        	    SET_POS
	                        </entry>
    	                    <entry>
        	                    
            	            </entry>
                	        <entry>
                    	    	unit id
                        	</entry>
	                        <entry>
    	                    	new x-value
        	                </entry>
            	            <entry>
                	        	new y-value
                    	    </entry>
	                    </row>
    	                <row>
        	                <entry>
            	              	120
                	        </entry>
                    	    <entry>
                        	    OBJECT_CREATE
	                        </entry>
    	                    <entry>
        	                    
            	            </entry>
                	        <entry>
                    	    	unit id
                        	</entry>
	                        <entry>
    	                    	object type
        	                </entry>
            	            <entry>
                	        	owner
                    	    </entry>
	                    </row>
    	                <row>
        	                <entry>
            	              	121
                	        </entry>
                    	    <entry>
                        	    OBJECT_REMOVE
	                        </entry>
    	                    <entry>
        	                    
            	            </entry>
                	        <entry>
                    	    	unit id
                        	</entry>
	                    </row>
	                </tbody>
    	        </tgroup>
        	</table>
        </section>
	</section>
</article>