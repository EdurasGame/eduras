<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplified DocBook XML V1.0//EN"
"http://www.oasis-open.org/docbook/xml/simple/1.0/sdocbook.dtd">
<article>
	<articleinfo>
		<title>Setup</title>
	</articleinfo>
	<!-- 
		Important note: Do not perform autoformat on this file
		to prevent leading whitespaces in code sections!
	 -->
	<section>
		<title>What this is about</title>
		<para>
			This document will give you a basic overview on how to perform a
			basic
			setup of eduras in your environment.
		</para>
		<para>
			The first step is divided into two parts: An Ubuntu part, that
			shows
			installation for ubuntu users.
			And a second part for Windows
			users.
			If
			you use another linux distribution, please consider the
			internet.
			You
			should find setup-instructions
			easily.
		</para>
		<para>
			The second step describes installation of the egit-plugin and
			setting
			up eclipse. It is equal for all operating systems.
		</para>
		<para>
			In the last step, you will connect to the Eduras? repository and
			be
			able to retrieve masses of code.
		</para>
	</section>
	<section>
	    <title>Important note</title>
	    <para>
	        Read through all setup instructions carefully before you start with setup.
	        Only start installation after you have read this guide completely.
	        You might come across some steps you can skip if you have developed
	        on Java 7 already.
	    </para>
	    <para>
	        Be aware that you use this setup guide <emphasis>on your own risk</emphasis>! We do not
	        guarantee that this instruction is completely correct.
	        If you come across problems, please report them to our team.
	    </para>
	</section>
	<section>
		<title>Step 1: Basics</title>
		<para>
			This step covers setup of Java Development Kit and Eclipse.
		</para>
		<para>
			You can head over to step two if
			you already have an existing Eclipse setup with Java 7.
		</para>
		<section>
			<title>on Ubuntu</title>
			<note>
				<para>
					You might want to update your system first,
			    	using the following command. This may take some time.
				</para>
				<programlisting>
sudo apt-get update &amp;&amp; sudo apt-get upgrade &amp;&amp; sudo apt-get dist-upgrade</programlisting>
			</note>
			<section>
			    <title>Install Java</title>
				    
				<para>
					At first, install Java 7 JRE and JDK if you didn't have,
					already.
					If you have Java 6 installed, you should remove it 
					using the following command before installing Java 7:
				</para>
				<programlisting>
sudo apt-get purge openjdk-\* icedtea-\* icedtea6-\*</programlisting>
				<para>
				    This will remove all Java-related packages from your system.
				</para>
				<para>
					You can install Java 7 JDK and JRE in a single step:
				</para>
				<programlisting>
sudo apt-get install openjdk-7-jre openjdk-7-jdk</programlisting>
				<para>
				    This will take about 113Mb of space and may take a little while.
				    After setup is completed, you can verify your Java installation
				    using the command <computeroutput>java -version</computeroutput>.
				    It should report a similar output to the following one:
				</para>
				<programlisting>
java version "1.7.0_09"
OpenJDK Runtime Environment (IcedTea7 2.3.4)
(7u9-2.3.4-0ubuntu1.12.04.1)
OpenJDK Client VM (build 23.2-b09, mixed mode, sharing)</programlisting>
			</section>
			<section>
			    <title>Install Eclipse</title>
			    <para>
					Then, start installing eclipse. You should do this manually
					because eclipse comes with Java 6 and uses unneccessary space.
				</para>
				<para>
				    Go to <ulink
						url="http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr1">Eclipse for Java homepage</ulink>
				    and select <computeroutput>Linux 64-bit</computeroutput> or <computeroutput>Linux 32-bit</computeroutput>
				    on the right. You will be redirected to download page and can download it (ca. 149Mb).
				</para>
				<para>
				    After download finished, go back to terminal and switch to directory where you downloaded
				    eclipse setup file (e.g. <computeroutput>eclipse-java-juno-SR1-linux-gtk.tar.gz</computeroutput>) to.
				    This is usually <computeroutput>~/Downloads</computeroutput>.			    
				</para>
				<para>
					The following code extracts your downloaded file and moves it to <computeroutput>/opt/eclipse</computeroutput>.
				</para>
				<programlisting>
tar -zxvf eclipse-java-juno-SR1-linux-gtk.tar.gz
sudo mv eclipse /opt
sudo chown -R 1000:1000 /opt/eclipse</programlisting>
				<para>
					Replace <computeroutput>eclipse-java-juno-SR1-linux-gtk.tar.gz</computeroutput> with
					the name of the setup file you have downloaded. Care if tar.gz-file is double nested, then
					you have an additional <computeroutput>eclipse/</computeroutput>.
				</para>
				<para>
				    You are now able to start eclipse using <computeroutput>/opt/eclipse/eclipse</computeroutput>.
				    To make starting easier and create a launcher icon, follow the next section.
				</para>
			</section>
			<section>
			    <title>Create a starter icon for eclipse</title>
			    <para>
			        To be able to start eclipse comfortably you can create a launcher icon on the unity bar.
			        This is done in two simple steps:
			    </para>
			    <para>
			        Create the file <computeroutput>/usr/local/bin/eclipse</computeroutput> (with sudo) with the following content:
			    </para>
			    <programlisting>
#!/bin/bash
export MOZILLA_FIVE_HOME="/usr/lib/firefox/"
export ECLIPSE_HOME="/opt/eclipse"
/opt/eclipse/eclipse "$@"</programlisting>
				<para>
				    Make it executable:
				</para>
				<programlisting>
sudo chmod +x /usr/local/bin/eclipse</programlisting>
				<para>
				    You are now able to start eclipse using the simple command <computeroutput>eclipse</computeroutput>.
				    But we want to go further and create a laucher icon:
				</para>
				<para>
				    Create the file <computeroutput>~/.local/share/applications/eclipse.desktop</computeroutput> with the following content and save it:
				</para>
				<programlisting>
[Desktop Entry]
Name=Eclipse
Name[de]=Eclipse
GenericName=Java Development
GenericName[de]=Java Development
Comment=IDE for Java SE
Comment[de]=IDE for Java SE
Exec=eclipse
Icon=/opt/eclipse/icon.xpm
Terminal=false
Type=Application
StartupNotify=false
Categories=Development;IDE;
OnlyShowIn=Unity;GNOME;XFCE;
MimeType=text/x-java;</programlisting>
				<para>
				    Now open this folder with a gui file manager (showing hidden files is ctrl+h). You can drag&amp;drop the eclipse icon
				    on the launcher bar on the left.
				</para>
				<figure>
		            <title>Drag the eclipse link on the unity bar.</title>
		            <mediaobject>
		                <imageobject>
		                    <imagedata fileref="images/setup1.png" format="PNG" />
		                </imageobject>
		            </mediaobject>
		        </figure>
			</section>
		</section>
		<section>
			<title>on Windows</title>
			<para>
				Firstly, install current version of
				<ulink
					url="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java 7 SDK</ulink>.
					Choose the JDK of latest Java SE 7 version. The JDK includes the JRE, so you don't need
					to install them separately.
					Please uninstall older Java 6 installations before you install Java 7.
			</para>
			<para>
			    You can check your current Java version by typing <computeroutput>java -version</computeroutput> in commandline.
			    You should see an output similar to the following, if you installed Java correctly:
			</para>
			<programlisting>
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b11)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode)</programlisting>    
			<para>
				Then install Eclipse IDE for Java SE.
				You can download it from
				<ulink
					url="http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr1">here</ulink>
				.
				Choose 32- or 64-bit version, depending on your operating system.

			</para>
		</section>
	</section>
	<section>
		<title>Step 2: Setting up Eclipse</title>
		<section>
			<title>First start</title>
			<para>
				On the first start of Eclipse, you are asked to choose a workspace.
				This is a folder where Eclipse stores all your projects you create. Eclipse
				can have different settings depending on selected workspace.
				Select an empty folder that you want to use and check the checkbox if
				you don't want to be asked again. Then press OK.
			</para>
			<figure>
	            <title>Choosing your workspace at startup.</title>
	            <mediaobject>
	                <imageobject>
	                    <imagedata fileref="images/setup2.png" format="PNG" />
	                </imageobject>
	            </mediaobject>
	        </figure>
		</section>
		<section>
		    <title>Configure workspace settings</title>
		    <para>
		        You might set a few options in workspace settings that makes coding a lot
		        easier.
		    </para>
		    <para>
		        Go to <computeroutput>Window -> Preferences -> General -> Editors ->
		        Text Editors</computeroutput> and enable <computeroutput>Show line numbers</computeroutput>
		        option. You may also want to increase the number of <computeroutput>Undo history size</computeroutput>
		        and enable <computeroutput>Highlight current line</computeroutput> feature.
		        Open the undercategory <computeroutput>Spelling</computeroutput>. We recommend to disable
		        spell checking at all.
		    </para>
		    <figure>
	            <title>Configuring editor settings.</title>
	            <mediaobject>
	                <imageobject>
	                    <imagedata fileref="images/setup3.png" format="PNG" />
	                </imageobject>
	            </mediaobject>
	        </figure>
	        <para>
	            Go to <computeroutput>Java -> Code Style -> Clean Up</computeroutput> in preferences and
	            use Eclipse [built-in] as profile.
	            This ensures that we don't clean-up source differently on everyone's client. We may
	            provide a custom profile later on, maybe. 
	        </para>
	        <figure>
	            <title>Configuring code styling preferences.</title>
	            <mediaobject>
	                <imageobject>
	                    <imagedata fileref="images/setup4.png" format="PNG" />
	                </imageobject>
	            </mediaobject>
	        </figure>
	        <para>
	            In <computeroutput>Java -> Editor -> Save Actions</computeroutput> you can choose to
	            automatically organize imports and cleanup on save. This is very handy.
	        </para>
	        <figure>
	            <title>Configuring editor save actions.</title>
	            <mediaobject>
	                <imageobject>
	                    <imagedata fileref="images/setup5.png" format="PNG" />
	                </imageobject>
	            </mediaobject>
	        </figure>
	        <para>
	            After these steps, you are ready to start collaboration.
	        </para>
		</section>
		<section>
		    <title>Installing EGit plugin</title>
		    <para>
		        To work with git in eclipse, you can download EGit plugin.
		    </para>
		    <para>
		        Go to <computeroutput>Help -> Install New Software...</computeroutput>
		        and select <computeroutput>Juno</computeroutput>. Now a list should be loaded
		        (this may take up to several minutes).
		        There, choose <computeroutput>Collaboration -> Eclipse EGit</computeroutput>
		        and click <computeroutput>Next</computeroutput>.
		    </para>
		    <figure>
	            <title>Installing EGit.</title>
	            <mediaobject>
	                <imageobject>
	                    <imagedata fileref="images/setup6.png" format="PNG" />
	                </imageobject>
	            </mediaobject>
	        </figure>
	        <para>
	            Continue installation process. You will need to restart eclipse at the end.
	        </para>
		</section>
	</section>
	<section>
	    <title>Step 3: Connecting to Eduras? repository</title>
	    <para>
	        Now it is time to connect to Eduras? repository.
	        Ensure you have read <emphasis>Getting started</emphasis> section in
	        our documentation before editing any code.
	    </para>
	    <para>
	        Choose <computeroutput>File -> Import... -> Git -> Projects from Git</computeroutput>.
	        You might get a notification that you have not installed git. Check the checkbox
	        and continue.
	    </para>
	    <figure>
            <title>Connecting to eduras.git</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/setup7.png" format="PNG" />
                </imageobject>
            </mediaobject>
        </figure>
        <figure>
            <title>Notice of missing git</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/setup8.png" format="PNG" />
                </imageobject>
            </mediaobject>
        </figure>
        <para>
            Choose <computeroutput>URI</computeroutput>.
            In the next form, enter connection details of eduras? repository.
            Take them from the following picture. You can simply fill in the URI field
            and eclipse fills in the other fields for you.
            Get your access password from your project leader.
        </para>
        <figure>
            <title>Connection details for eduras.git</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/setup9.png" format="PNG" />
                </imageobject>
            </mediaobject>
        </figure>
        <para>
            Eclipse is now retrieving data from repository.
            Confirm occuring popups with <computeroutput>yes</computeroutput> and click
            <computeroutput>Next</computeroutput>.
            You can now choose, which branches you want to receive, choose All.
        </para>
        <para>
            In the next view you can specify a directory where you want to store your git
            repository. You may keep default values.
        </para>
        <para>
            You may come across a message concerning Secure Storage. This is kind of a
            master password for your passwords stored in eclipse.
        </para>
        <para>
            Now click <computeroutput>Next</computeroutput> and <computeroutput>Finish</computeroutput>
            until dialog is complete.
            You do now have Eduras project in your workspace and are ready to start.
        </para>
	</section>
	<section>
	    <title>Step 4: First run</title>
	    <para>
	        On your first run you don't have run- or debug-configurations.
	    </para>
	    <para>
	        You will find the main class of server in <computeroutput>de.illonis.eduras.Eduras</computeroutput>
	        and the main class of client in <computeroutput>de.illonis.eduras.gameclient.EdurasClient</computeroutput>.
	    </para>
	</section>
	<section>
		<title>What's next?</title>
		<para>
			To get an overview about Eduras? features and possibilities, read through some
			documentation pages. If you have not read the "Getting started" section yet,
			this is a good time to do so. It is a very well written guide that teachs you
			some basics in Eduras? coding guidelines. 
		</para>
	</section>
</article>